<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRAVITAS | Event Horizon</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Rajdhani:wght@300;600&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { brand: ['Cinzel', 'serif'], tech: ['Rajdhani', 'sans-serif'] },
                    colors: { void: '#020202' },
                    animation: { 'fade-in': 'fadeIn 2s ease-out forwards' },
                    keyframes: { fadeIn: { '0%': { opacity: 0 }, '100%': { opacity: 1 } } }
                }
            }
        }
    </script>
    <style>
        body { background-color: #020202; color: #fff; height: 100vh; overflow: hidden; margin: 0; }
        canvas { display: block; position: absolute; inset: 0; z-index: 1; }

        /* The Control Dock */
        .glass-dock {
            background: rgba(5, 5, 5, 0.6);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 99px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            transition: 0.3s;
        }

        /* Loading Bar */
        .filament {
            height: 1px; background: linear-gradient(90deg, transparent, #fff, transparent);
            width: 0%; transition: width 2s ease-in-out;
            box-shadow: 0 0 10px #fff;
        }

        /* Tooltip */
        .tooltip {
            position: absolute; bottom: 120%; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.8); border: 1px solid #333; padding: 4px 8px;
            font-family: 'Rajdhani', sans-serif; font-size: 10px; text-transform: uppercase;
            letter-spacing: 1px; border-radius: 4px; opacity: 0; pointer-events: none; transition: 0.2s;
            white-space: nowrap;
        }
        .group:hover .tooltip { opacity: 1; bottom: 140%; }
    </style>
</head>
<body>

    <div id="intro-layer" class="absolute inset-0 z-50 bg-void flex flex-col items-center justify-center">
        <div class="text-center">
            <h1 class="font-brand text-4xl tracking-[0.5em] text-white mb-6 opacity-0 animate-fade-in">GRAVITAS</h1>
            <div class="w-64 h-[1px] bg-white/10 relative overflow-hidden mx-auto">
                <div id="loader" class="filament absolute inset-0 mx-auto"></div>
            </div>
            <div id="status-text" class="font-tech text-xs text-zinc-500 mt-4 tracking-widest uppercase">Initializing Physics Engine...</div>
        </div>
    </div>

    <canvas id="canvas"></canvas>

    <div id="ui-layer" class="absolute inset-0 z-20 pointer-events-none hidden opacity-0 transition-opacity duration-1000">

        <div class="absolute top-8 left-0 right-0 text-center pointer-events-none">
            <h2 class="font-brand text-xl tracking-[0.3em] opacity-50">GRAVITAS</h2>
            <p class="font-tech text-[10px] text-zinc-600 tracking-widest">EVENT HORIZON v2.0</p>
        </div>

        <div class="absolute bottom-10 left-1/2 -translate-x-1/2 pointer-events-auto">
            <div class="glass-dock flex items-center gap-2 px-4 py-2">

                <button onclick="setMode('attract')" class="group relative p-3 rounded-full hover:bg-white/10 transition">
                    <i data-lucide="magnet" id="icon-attract" class="w-5 h-5 text-white"></i>
                    <span class="tooltip">Gravity Well</span>
                </button>

                <button onclick="setMode('repel')" class="group relative p-3 rounded-full hover:bg-white/10 transition">
                    <i data-lucide="scan-line" id="icon-repel" class="w-5 h-5 text-zinc-500"></i>
                    <span class="tooltip">Force Field</span>
                </button>

                <div class="w-px h-6 bg-white/10 mx-2"></div>

                <button onclick="toggleTrails()" class="group relative p-3 rounded-full hover:bg-white/10 transition">
                    <i data-lucide="wind" id="icon-trails" class="w-5 h-5 text-zinc-500"></i>
                    <span class="tooltip">Quantum Trails</span>
                </button>

                <button onclick="switchTheme()" class="group relative p-3 rounded-full hover:bg-white/10 transition">
                    <i data-lucide="palette" id="icon-theme" class="w-5 h-5 text-blue-400"></i>
                    <span class="tooltip">Shift Spectrum</span>
                </button>

                <div class="w-px h-6 bg-white/10 mx-2"></div>

                <button onclick="resetParticles()" class="group relative p-3 rounded-full hover:bg-white/10 transition">
                    <i data-lucide="rotate-ccw" class="w-5 h-5 text-zinc-500 hover:text-white hover:rotate-180 duration-500"></i>
                    <span class="tooltip">Reboot</span>
                </button>

            </div>
        </div>

        <div class="absolute bottom-24 w-full text-center pointer-events-none">
            <p class="font-tech text-[9px] text-zinc-700 tracking-[0.2em] animate-pulse">CLICK TO TRIGGER SHOCKWAVE</p>
        </div>

    </div>

    <script>
        window.onload = () => {
            lucide.createIcons();
            initLoad();
        };

        // --- CONFIG ---
        const PARTICLE_COUNT = 600;
        const MOUSE_RADIUS = 180;

        let mode = 'attract';
        let trailsEnabled = false;
        let themeIndex = 0; // 0: Star, 1: Matrix, 2: Inferno

        // THEMES
        const THEMES = [
            { name: 'STARLIGHT', colors: ['rgba(255,255,255,0.9)', 'rgba(56, 189, 248, 0.8)', 'rgba(168, 85, 247, 0.8)'], iconColor: 'text-blue-400' },
            { name: 'MATRIX', colors: ['rgba(34, 197, 94, 0.9)', 'rgba(20, 184, 166, 0.8)', 'rgba(0, 0, 0, 0.8)'], iconColor: 'text-green-500' },
            { name: 'INFERNO', colors: ['rgba(249, 115, 22, 0.9)', 'rgba(239, 68, 68, 0.8)', 'rgba(255, 200, 0, 0.8)'], iconColor: 'text-orange-500' }
        ];

        let particles = [];
        let mouse = { x: undefined, y: undefined };
        let canvas, ctx;

        // --- 1. BOOT SEQUENCE ---
        async function initLoad() {
            const bar = document.getElementById('loader');
            const txt = document.getElementById('status-text');
            const layer = document.getElementById('intro-layer');
            const ui = document.getElementById('ui-layer');

            setTimeout(() => bar.style.width = "100%", 100);
            setTimeout(() => txt.innerText = "CALCULATING VECTORS...", 800);
            setTimeout(() => txt.innerText = "RENDERING UNIVERSE...", 1500);

            await new Promise(r => setTimeout(r, 2200));

            layer.style.opacity = '0';
            setTimeout(() => {
                layer.classList.add('hidden');
                ui.classList.remove('hidden');
                setTimeout(() => ui.style.opacity = '1', 100);
                initCanvas();
            }, 1000);
        }

        // --- 2. PHYSICS ENGINE ---
        function initCanvas() {
            canvas = document.getElementById('canvas');
            ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                initParticles();
            });

            window.addEventListener('mousemove', (e) => {
                mouse.x = e.x;
                mouse.y = e.y;
            });

            // SHOCKWAVE CLICK
            window.addEventListener('mousedown', () => {
                particles.forEach(p => {
                    // Push everything away from mouse instantly
                    let dx = p.x - mouse.x;
                    let dy = p.y - mouse.y;
                    let dist = Math.sqrt(dx*dx + dy*dy);
                    let force = 1000 / (dist + 1); // Explosive force

                    let angle = Math.atan2(dy, dx);
                    p.x += Math.cos(angle) * force;
                    p.y += Math.sin(angle) * force;
                });
            });

            initParticles();
            animate();
        }

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2 + 1;
                this.baseX = this.x;
                this.baseY = this.y;
                this.density = (Math.random() * 30) + 1;
                this.history = []; // For trails
                this.color = this.getRandomColor();
            }

            getRandomColor() {
                const palette = THEMES[themeIndex].colors;
                return palette[Math.floor(Math.random() * palette.length)];
            }

            draw() {
                // Draw Trails if enabled
                if(trailsEnabled && this.history.length > 2) {
                    ctx.beginPath();
                    ctx.moveTo(this.history[0].x, this.history[0].y);
                    for(let i = 0; i < this.history.length; i++) {
                        ctx.lineTo(this.history[i].x, this.history[i].y);
                    }
                    ctx.strokeStyle = this.color;
                    ctx.lineWidth = this.size / 2;
                    ctx.globalAlpha = 0.3; // Faint trails
                    ctx.stroke();
                    ctx.globalAlpha = 1.0;
                }

                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.closePath();
                ctx.fill();
            }

            update() {
                let dx = mouse.x - this.x;
                let dy = mouse.y - this.y;
                let distance = Math.sqrt(dx * dx + dy * dy);

                let forceDirectionX = dx / distance;
                let forceDirectionY = dy / distance;
                let maxDistance = MOUSE_RADIUS;
                let force = (maxDistance - distance) / maxDistance;
                let directionX = forceDirectionX * force * this.density;
                let directionY = forceDirectionY * force * this.density;

                if (distance < MOUSE_RADIUS) {
                    if (mode === 'repel') {
                        this.x -= directionX * 5;
                        this.y -= directionY * 5;
                    } else {
                        this.x += directionX * 2; 
                        this.y += directionY * 2;
                    }
                } else {
                    if (this.x !== this.baseX) {
                        let dx = this.x - this.baseX;
                        this.x -= dx / 20; // Slower return
                    }
                    if (this.y !== this.baseY) {
                        let dy = this.y - this.baseY;
                        this.y -= dy / 20;
                    }
                }

                // Update History for Trails
                if(trailsEnabled) {
                    this.history.push({x: this.x, y: this.y});
                    if(this.history.length > 5) this.history.shift(); // Keep trail short
                } else {
                    this.history = [];
                }

                this.draw();
            }
        }

        function initParticles() {
            particles = [];
            for (let i = 0; i < PARTICLE_COUNT; i++) {
                particles.push(new Particle());
            }
        }

        function animate() {
            // Clear Screen (with slight fade for trails effect if needed, but we use clearRect for crispness)
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
            }
            requestAnimationFrame(animate);
        }

        // --- 3. CONTROLS ---
        function setMode(newMode) {
            mode = newMode;
            document.getElementById('icon-attract').classList.toggle('text-white', mode === 'attract');
            document.getElementById('icon-attract').classList.toggle('text-zinc-500', mode !== 'attract');
            document.getElementById('icon-repel').classList.toggle('text-white', mode === 'repel');
            document.getElementById('icon-repel').classList.toggle('text-zinc-500', mode !== 'repel');
        }

        function toggleTrails() {
            trailsEnabled = !trailsEnabled;
            const icon = document.getElementById('icon-trails');
            if(trailsEnabled) {
                icon.classList.remove('text-zinc-500');
                icon.classList.add('text-white', 'drop-shadow-[0_0_10px_white]');
            } else {
                icon.classList.add('text-zinc-500');
                icon.classList.remove('text-white', 'drop-shadow-[0_0_10px_white]');
            }
        }

        function switchTheme() {
            themeIndex = (themeIndex + 1) % THEMES.length;
            const theme = THEMES[themeIndex];

            // Update Icon Color
            const icon = document.getElementById('icon-theme');
            icon.className = `w-5 h-5 ${theme.iconColor} transition`;

            // Update all particles
            particles.forEach(p => p.color = p.getRandomColor());
        }

        function resetParticles() {
            initParticles();
        }

    </script>
</body>
</html>